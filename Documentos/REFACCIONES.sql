-- MySQL Script generated by MySQL Workbench
-- Tue Mar 21 13:01:25 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`PRODUCTOS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`PRODUCTOS` ;

CREATE TABLE IF NOT EXISTS `mydb`.`PRODUCTOS` (
  `idPRODUCTOS` INT NOT NULL,
  `CODIGO` VARCHAR(45) NOT NULL,
  `DESCRIPCION` VARCHAR(140) NOT NULL,
  `CATEGORIA` VARCHAR(3) NOT NULL,
  `DESCRIPCION DE CATEGORIA` VARCHAR(45) NOT NULL,
  `PRECIO` FLOAT NOT NULL,
  `CLASE` VARCHAR(45) NOT NULL,
  `ARMADOR` VARCHAR(45) NOT NULL,
  `SERVICIO` VARCHAR(45) NOT NULL,
  `REFERENCIA` VARCHAR(4) NOT NULL,
  `SISTEMA` VARCHAR(45) NOT NULL,
  `GENERO` VARCHAR(45) NOT NULL,
  `MARCA` VARCHAR(45) NOT NULL,
  `EQUIVALENCIA` VARCHAR(45) NOT NULL,
  `P.DE LISTA` VARCHAR(45) NOT NULL,
  `O.ESP` VARCHAR(45) NOT NULL,
  `NO.PARTE` VARCHAR(45) NOT NULL,
  `LINEA` VARCHAR(45) NOT NULL,
  `PRECIO ANTERIOR` FLOAT NOT NULL,
  `NUEVO PRECIO` FLOAT NOT NULL,
  `%INCREMENTO` FLOAT NULL,
  `CLAVE` VARCHAR(45) NOT NULL,
  `ORIGEN` VARCHAR(45) NOT NULL,
  `GRUPOS` VARCHAR(45) NOT NULL,
  `OBSERVACION` VARCHAR(45) NOT NULL,
  `FECHA` VARCHAR(45) NOT NULL,
  `ARTICULO` VARCHAR(45) NOT NULL,
  `UNIDAD` VARCHAR(45) NOT NULL,
  `UXCTN` INT NOT NULL,
  `EXISTENCIA` VARCHAR(45) NOT NULL,
  `PRECIO NETO MN` FLOAT NOT NULL,
  `FOTO` VARCHAR(512) NULL,
  `CANTIDAD` INT NOT NULL,
  `CANT POR CARTON` INT NOT NULL,
  `PRECIO L4` FLOAT NOT NULL,
  `LINEAS` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idPRODUCTOS`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ORDEN`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`ORDEN` ;

CREATE TABLE IF NOT EXISTS `mydb`.`ORDEN` (
  `idORDEN` INT NOT NULL,
  `ARTICULO` VARCHAR(45) NOT NULL,
  `DESCIPCION` VARCHAR(45) NOT NULL,
  `PRECIO` FLOAT NOT NULL,
  `PRODUCTOS_idPRODUCTOS` INT NOT NULL,
  PRIMARY KEY (`idORDEN`, `PRODUCTOS_idPRODUCTOS`),
  INDEX `fk_ORDEN_PRODUCTOS_idx` (`PRODUCTOS_idPRODUCTOS` ASC),
  CONSTRAINT `fk_ORDEN_PRODUCTOS`
    FOREIGN KEY (`PRODUCTOS_idPRODUCTOS`)
    REFERENCES `mydb`.`PRODUCTOS` (`idPRODUCTOS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`CLIENTE` ;

CREATE TABLE IF NOT EXISTS `mydb`.`CLIENTE` (
  `idCLIENTE` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NULL,
  `PASS` VARCHAR(45) NOT NULL,
  `ORDEN_idORDEN` INT NOT NULL,
  `ORDEN_PRODUCTOS_idPRODUCTOS` INT NOT NULL,
  PRIMARY KEY (`idCLIENTE`, `ORDEN_idORDEN`, `ORDEN_PRODUCTOS_idPRODUCTOS`),
  INDEX `fk_CLIENTE_ORDEN1_idx` (`ORDEN_idORDEN` ASC, `ORDEN_PRODUCTOS_idPRODUCTOS` ASC),
  CONSTRAINT `fk_CLIENTE_ORDEN1`
    FOREIGN KEY (`ORDEN_idORDEN` , `ORDEN_PRODUCTOS_idPRODUCTOS`)
    REFERENCES `mydb`.`ORDEN` (`idORDEN` , `PRODUCTOS_idPRODUCTOS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ADMINISTRADOR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`ADMINISTRADOR` ;

CREATE TABLE IF NOT EXISTS `mydb`.`ADMINISTRADOR` (
  `idADMINISTRADOR` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NULL,
  `PASS` VARCHAR(45) NULL,
  `CLIENTE_idCLIENTE` INT NOT NULL,
  `CLIENTE_ORDEN_idORDEN` INT NOT NULL,
  `CLIENTE_ORDEN_PRODUCTOS_idPRODUCTOS` INT NOT NULL,
  `PRODUCTOS_idPRODUCTOS` INT NOT NULL,
  PRIMARY KEY (`idADMINISTRADOR`, `CLIENTE_idCLIENTE`, `CLIENTE_ORDEN_idORDEN`, `CLIENTE_ORDEN_PRODUCTOS_idPRODUCTOS`, `PRODUCTOS_idPRODUCTOS`),
  INDEX `fk_ADMINISTRADOR_CLIENTE1_idx` (`CLIENTE_idCLIENTE` ASC, `CLIENTE_ORDEN_idORDEN` ASC, `CLIENTE_ORDEN_PRODUCTOS_idPRODUCTOS` ASC),
  INDEX `fk_ADMINISTRADOR_PRODUCTOS1_idx` (`PRODUCTOS_idPRODUCTOS` ASC),
  CONSTRAINT `fk_ADMINISTRADOR_CLIENTE1`
    FOREIGN KEY (`CLIENTE_idCLIENTE` , `CLIENTE_ORDEN_idORDEN` , `CLIENTE_ORDEN_PRODUCTOS_idPRODUCTOS`)
    REFERENCES `mydb`.`CLIENTE` (`idCLIENTE` , `ORDEN_idORDEN` , `ORDEN_PRODUCTOS_idPRODUCTOS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ADMINISTRADOR_PRODUCTOS1`
    FOREIGN KEY (`PRODUCTOS_idPRODUCTOS`)
    REFERENCES `mydb`.`PRODUCTOS` (`idPRODUCTOS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
